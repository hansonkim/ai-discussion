# AI 토론 시스템

여러 AI 모델을 사용하여 주제에 대해 상반된 입장으로 토론하고 합의점을 찾는 Python 프로그램입니다.

## 지원 AI 모델

- **Claude** (Anthropic) - `claude -p` CLI 사용
- **OpenAI GPT** (Codex) - `codex exec --skip-git-repo-check` CLI 사용
- **Gemini** (Google) - `gemini -p` CLI 사용
- **Grok** (xAI) - `grok -p` CLI 사용

**각 입장마다 다른 AI 모델을 선택할 수 있습니다!**

## 필수 요구사항

### Python 패키지

```bash
# 기본 패키지만 필요 (API 클라이언트 불필요)
# dataclass는 Python 3.7+ 기본 포함
```

### AI CLI 도구

사용하려는 AI 모델의 CLI 도구가 설치되어 있어야 합니다:

```bash
# Claude 설치 확인
claude --version

# 기타 AI CLI 도구들도 각각 설치 필요
# OpenAI: codex CLI
# Gemini: gemini CLI
# Grok: grok CLI
```

**참고**: API 키 대신 CLI 명령어를 사용하므로 각 AI 도구가 자체적으로 인증을 처리합니다.

## 사용법

### 기본 사용

```bash
python3 ai_debate.py
```

실행 후:
1. 토론 설정 입력 (글자 수 제한, 최대 라운드 수)
2. 토론 주제 입력
3. 각 입장에 사용할 AI 모델 선택

### 명령줄에서 주제 지정

```bash
python3 ai_debate.py "원격 근무 의무화"
```

```bash
python3 ai_debate.py "AI 규제 강화의 필요성"
```

## 토론 진행 과정

### 1. 토론 설정
```
⚙️  토론 설정
------------------------------------------------------------
답변 글자 수 제한 [기본: 500]: 400
최대 토론 라운드 횟수 [기본: 5]: 3

✅ 설정 완료: 글자 수 제한=400자, 최대 라운드=3회
💡 양측이 합의하면 최대 라운드 전에 조기 종료될 수 있습니다.
```

### 2. 주제 분석 및 AI 선택
- 입력한 주제를 분석하고 상반된 두 입장(A, B)을 자동 생성
- 각 입장(A, B)에 사용할 AI 모델을 선택

### 3. 토론 진행
- **라운드 1**: 초기 주장 (2라운드 이상일 때)
- **라운드 2~N-1**: 자유로운 토론 (반박, 질문, 인정, 합의점 탐색)
- **라운드 N**: 최종 합의안

### 4. 조기 종료 (상호 동의 기반)
최소 2라운드 이후, 각 라운드 종료 시:
```
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
🤝 양측의 합의 준비 상태를 확인합니다...
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

🔵 찬성파: ✅ 준비 완료
🟡 반대파: ✅ 준비 완료

🎉 양측 모두 합의 준비가 완료되었습니다!
📝 최종 합의안 도출을 시작합니다.
```

양측이 모두 준비되면 즉시 최종 합의안 라운드로 이동합니다.

### 5. 결과 저장
- 전체 토론: `{주제-키워드}-{타임스탬프}.md`
- 합의안만: `{주제-키워드}-conclusion-{타임스탬프}.md`

## 예시 주제

- "4일 근무제 도입"
- "원격 근무 의무화"
- "AI 창작물의 저작권 보호"
- "청소년 스마트폰 사용 제한"
- "기본소득제 도입"
- "전기차 의무화 정책"

## 출력 예시

```
============================================================
🎯 AI 토론 시스템
============================================================

여러 AI 모델을 사용하여 상반된 입장으로 토론하고 합의점을 찾습니다.
지원 모델: Claude, OpenAI, Gemini, Grok

⚙️  토론 설정
------------------------------------------------------------
답변 글자 수 제한 [기본: 500]:
최대 토론 라운드 횟수 [기본: 5]:

✅ 설정 완료: 글자 수 제한=500자, 최대 라운드=5회
💡 양측이 합의하면 최대 라운드 전에 조기 종료될 수 있습니다.

============================================================
📋 주제 분석 중: 원격 근무 의무화
============================================================

✅ 토론 주제: 기업의 원격 근무 의무화 정책 도입

🔵 입장 A (찬성파)
   원격 근무를 의무화하여 워크-라이프 밸런스를 개선하고 생산성을 높여야 한다

🟡 입장 B (반대파)
   원격 근무를 강제하지 말고 기업과 직원의 자율적 선택에 맡겨야 한다

============================================================
🤖 찬성파의 AI 선택
============================================================

1. Claude (Anthropic)
2. OpenAI GPT (Codex)
3. Gemini (Google)
4. Grok (xAI)

AI를 선택하세요 (1-4) [기본: 1]: 1
✅ Claude (Anthropic) 선택됨

============================================================
🤖 반대파의 AI 선택
============================================================

1. Claude (Anthropic)
2. OpenAI GPT (Codex)
3. Gemini (Google)
4. Grok (xAI)

AI를 선택하세요 (1-4) [기본: 1]: 3
✅ Gemini (Google) 선택됨

📝 파일명 키워드 생성 중...
✅ 파일명: remote-work-mandate-20241028-143022.md

============================================================
📍 라운드 1: 초기 주장
============================================================

🔵 찬성파 (Claude) 발언 중...

🔵 찬성파 (Claude):
------------------------------------------------------------
(AI의 주장이 출력됩니다)
------------------------------------------------------------

🟡 반대파 (Gemini) 발언 중...

🟡 반대파 (Gemini):
------------------------------------------------------------
(AI의 주장이 출력됩니다)
------------------------------------------------------------

============================================================
📍 라운드 2: 토론 2
============================================================
...

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
🤝 양측의 합의 준비 상태를 확인합니다...
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

🔵 찬성파: ✅ 준비 완료
🟡 반대파: ✅ 준비 완료

🎉 양측 모두 합의 준비가 완료되었습니다!
📝 최종 합의안 도출을 시작합니다.

============================================================
📍 라운드 3: 최종 합의안
============================================================
...

============================================================
✅ 토론이 완료되었습니다! (총 3라운드 진행)
📄 토론 전체 기록: remote-work-mandate-20241028-143022.md
============================================================
```

## 기능

- ✅ **다중 AI 모델 지원** - Claude, OpenAI, Gemini, Grok 중 선택
- ✅ **입장별 AI 선택** - 각 입장마다 다른 AI 사용 가능
- ✅ **자동 입장 생성** - 주제만 입력하면 상반된 입장 자동 생성
- ✅ **유연한 라운드 구조** - 초기 주장 → 자유 토론 → 최종 합의안
- ✅ **설정 가능한 글자 수 제한** - 기본 500자, 사용자 지정 가능
- ✅ **설정 가능한 최대 라운드 수** - 기본 5회, 사용자 지정 가능
- ✅ **조기 종료** - 양측이 합의하면 최대 라운드 전에 종료
- ✅ **자동 글자 수 검증** - 너무 짧으면 확장 요청, 너무 길면 요약 요청
- ✅ **실시간 저장** - 각 발언마다 즉시 파일 저장
- ✅ **마크다운 출력** - GitHub, Notion 등에서 바로 활용 가능
- ✅ **합의안 별도 저장** - 최종 합의안만 별도 파일로 저장
- ✅ **영문 파일명** - AI가 주제를 영어 키워드로 변환

## 글자 수 검증 시스템

### 자동 확장 (너무 짧은 경우)
```
⚠️  답변이 80자로 너무 짧습니다. 더 상세한 답변을 요청합니다... (최소 권장: 125자)
✅ 확장 완료: 320자
```

### 자동 요약 (너무 긴 경우)
```
⚠️  답변이 723자로 제한(500자)을 초과했습니다. 요약을 요청합니다...
✅ 요약 완료: 487자
```

글자 수 범위: **최소 (제한 ÷ 4) ~ 최대 (제한)자**
- 예: 500자 제한 → 125~500자 권장
- 예: 300자 제한 → 75~300자 권장

## 출력 파일 예시

### 전체 토론 기록 (`remote-work-mandate-20241028-143022.md`)

```markdown
# AI 토론 기록

**생성 일시**: 2024년 10월 28일 14:30:22

---

## 📋 토론 주제

기업의 원격 근무 의무화 정책 도입

### 🔵 입장 A: 찬성파 (Claude (Anthropic))

> 원격 근무를 의무화하여 워크-라이프 밸런스를 개선하고 생산성을 높여야 한다

### 🟡 입장 B: 반대파 (Gemini (Google))

> 원격 근무를 강제하지 말고 기업과 직원의 자율적 선택에 맡겨야 한다

---

## 💬 토론 내용

### 라운드 1: 초기 주장

#### 🔵 찬성파 (Claude)

토론 내용...

#### 🟡 반대파 (Gemini)

토론 내용...

### 라운드 2: 토론 2

#### 🔵 찬성파 (Claude)

토론 내용...

#### 🟡 반대파 (Gemini)

토론 내용...

### 라운드 3: 최종 합의안

#### 🔵 찬성파 (Claude)

최종 합의안...

#### 🟡 반대파 (Gemini)

최종 합의안...
```

### 합의안 (`remote-work-mandate-conclusion-20241028-143022.md`)

```markdown
# 토론 합의안

**생성 일시**: 2024년 10월 28일 14:30:22

---

## 📋 토론 주제

기업의 원격 근무 의무화 정책 도입

---

## 🤝 양측 입장

### 🔵 찬성파 (Claude (Anthropic))

> 원격 근무를 의무화하여...

### 🟡 반대파 (Gemini (Google))

> 원격 근무를 강제하지 말고...

---

## ✅ 최종 합의안

### 🔵 찬성파 (Claude)의 제안

합의안 내용...

### 🟡 반대파 (Gemini)의 제안

합의안 내용...
```

## 문제 해결

### AI CLI를 찾을 수 없다는 오류

```
Error: Claude CLI를 찾을 수 없습니다.
```

→ 해당 AI의 CLI 도구를 먼저 설치해주세요. 각 AI 제공업체의 설치 가이드를 참조하세요.

### CLI 명령어가 다른 경우

각 AI 모델의 CLI 명령어가 다를 수 있습니다. `ai_debate.py` 파일 내 `AVAILABLE_AI_MODELS` 딕셔너리에서 `command` 배열을 수정하세요:

```python
AVAILABLE_AI_MODELS = {
    "claude": AIModel(
        name="Claude",
        command="claude -p".split(),
        display_name="Claude (Anthropic)"
    ),
    "openai": AIModel(
        name="OpenAI",
        command="codex exec --skip-git-repo-check".split(),
        display_name="OpenAI GPT (Codex)"
    ),
    "gemini": AIModel(
        name="Gemini",
        command="gemini -p".split(),
        display_name="Gemini (Google)"
    ),
    "grok": AIModel(
        name="Grok",
        command="grok -p".split(),
        display_name="Grok (xAI)"
    )
}
```

### Codex가 너무 짧게 답변하는 경우

프로그램이 자동으로 감지하여 더 상세한 답변을 요청합니다:
```
⚠️  답변이 80자로 너무 짧습니다. 더 상세한 답변을 요청합니다...
```

### Claude가 글자 수 제한을 무시하는 경우

프로그램이 자동으로 감지하여 요약을 요청합니다:
```
⚠️  답변이 723자로 제한(500자)을 초과했습니다. 요약을 요청합니다...
```

### Python 버전

Python 3.7 이상이 필요합니다 (dataclass 지원):

```bash
python3 --version
```

## 라이선스

MIT License
